<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vantality | Luau API & Marketplace</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

    <header class="header">
        <div class="header-inner">
            <div class="logo-wrap">
                <span class="logo-main">VANTALITY</span>
                <span class="logo-sub">DEVELOPER</span>
            </div>
            <nav class="top-nav">
                <a href="#market">Marketplace</a>
                <a href="#api">Luau API</a>
                <a href="#cleanup">OnUnload</a>
                <a href="https://t.me/ahk_gbs" class="btn-primary">Telegram</a>
            </nav>
        </div>
    </header>

    <section class="hero-section">
        <div class="hero-content">
            <h1 class="glow-text">LUAU SCRIPTING API</h1>
            <p>Подробная документация по созданию кастомных скриптов для экосистемы Vantality.</p>
        </div>
    </section>

    <main class="main-content">
        <!-- MARKETPLACE -->
        <section id="market" class="content-block">
            <div class="block-title">
                <i data-lucide="shopping-cart"></i>
                <h2>Marketplace System</h2>
            </div>
            <p class="section-desc">Ваши скрипты и конфиги попадают в общую базу данных. Маркетплейс автоматически управляет версиями, позволяя пользователям скачивать, обновлять и удалять ваши работы в один клик.</p>
            
            <div class="market-grid">
                <div class="m-card">
                    <div class="m-icon"><i data-lucide="file-code"></i></div>
                    <h3>Scripts</h3>
                    <p>Пользовательские Luau модули. Загружаются в песочнице с доступом к <code>Vantality</code> API.</p>
                </div>
                <div class="m-card">
                    <div class="m-icon"><i data-lucide="settings"></i></div>
                    <h3>Main Configs</h3>
                    <p>JSON-пресеты для настроек основного меню (FOV, World, Player).</p>
                </div>
                <div class="m-card">
                    <div class="m-icon"><i data-lucide="layout"></i></div>
                    <h3>Script Configs</h3>
                    <p>Настройки для API-скриптов. Сохраняются автоматически при изменении значений в UI.</p>
                </div>
            </div>
        </section>

        <!-- CORE API -->
        <section id="api" class="content-block">
            <div class="block-title">
                <i data-lucide="terminal"></i>
                <h2>Documentation</h2>
            </div>

            <!-- Intro -->
            <div class="api-sub-section">
                <h3>Введение и Конфигурация</h3>
                <p>Все скрипты выполняются в изолированном окружении. API автоматически загружает и сохраняет значения элементов. </p>
                <ul class="text-list">
                    <li><strong>Ключ сохранения:</strong> API ищет параметр <code>Flag</code>. Если он отсутствует, используется <code>Name</code>.</li>
                    <li><strong>Nested Menus:</strong> Большинство элементов поддерживают вложенные меню через кнопку шестерёнки.</li>
                </ul>
                <div class="method-box">
                    <div class="method-header">
                        <span class="method-name">Vantality.CreateSection</span>
                        <span class="method-params">(title: string)</span>
                        <span class="method-return">returns: SectionProxy</span>
                    </div>
                    <div class="method-body">
                        <p>Инициализирует новую секцию. API само выберет оптимальную колонку для отрисовки.</p>
                        <div class="code-window">
                            <pre><code>local UI = Vantality.CreateSection("General Settings")</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- UI ELEMENTS DETAILED -->
            <div class="api-sub-section">
                <h3>Создание элементов (UI Methods)</h3>
                
                <div class="element-table">
                    <!-- Toggle -->
                    <div class="el-row">
                        <div class="el-info">
                            <h4>AddToggle</h4>
                            <p>Стандартный переключатель. <br><code>Risky:</code> оранжевый текст. <br><code>Option:</code> включает вложенное меню.</p>
                        </div>
                        <div class="el-code">
                            <pre><code>UI:AddToggle({ 
    Name = "God Mode", 
    Default = false, 
    Risky = true,
    Option = true,
    Callback = function(state) end 
})</code></pre>
                        </div>
                    </div>

                    <!-- Integer Slider -->
                    <div class="el-row">
                        <div class="el-info">
                            <h4>AddSlider (Integer)</h4>
                            <p>Слайдер для целых чисел. Используйте <code>Step</code> для шага и <code>Type</code> для суффикса (%, s, studs).</p>
                        </div>
                        <div class="el-code">
                            <pre><code>UI:AddSlider({ 
    Name = "WalkSpeed", 
    Range = {16, 200}, 
    Default = 16, 
    Step = 1,
    Type = " studs",
    Callback = function(v) end 
})</code></pre>
                        </div>
                    </div>

                    <!-- Precise Slider -->
                    <div class="el-row">
                        <div class="el-info">
                            <h4>AddSlider (Precise)</h4>
                            <p>Для дробных значений (Float). <br><code>Precise:</code> кол-во знаков после запятой.</p>
                        </div>
                        <div class="el-code">
                            <pre><code>UI:AddSlider({ 
    Name = "Jump Height", 
    Range = {0, 1}, 
    Default = 0.5, 
    Precise = 2,
    Callback = function(v) end 
})</code></pre>
                        </div>
                    </div>

                    <!-- Dropdown Single -->
                    <div class="el-row">
                        <div class="el-info">
                            <h4>AddDropdown</h4>
                            <p>Одиночный выбор строки из списка <code>Values</code>. Возвращает строку.</p>
                        </div>
                        <div class="el-code">
                            <pre><code>UI:AddDropdown({ 
    Name = "Target Bone", 
    Values = {"Head", "Torso", "Random"}, 
    Default = "Head",
    Callback = function(v) end 
})</code></pre>
                        </div>
                    </div>

                    <!-- Dropdown Multi -->
                    <div class="el-row">
                        <div class="el-info">
                            <h4>AddDropdown (Multi)</h4>
                            <p>Множественный выбор. <br><strong>Callback:</strong> возвращает таблицу <code>{ [Name] = bool }</code>.</p>
                        </div>
                        <div class="el-code">
                            <pre><code>UI:AddDropdown({ 
    Name = "Filters", 
    Values = {"Players", "NPCs"}, 
    Default = {["Players"] = true},
    Multi = true,
    Callback = function(tbl) end 
})</code></pre>
                        </div>
                    </div>

                    <!-- Color Picker -->
                    <div class="el-row">
                        <div class="el-info">
                            <h4>AddColorPicker</h4>
                            <p>Выбор цвета. <br><code>Transparency:</code> поддержка альфа-канала (0-1).</p>
                        </div>
                        <div class="el-code">
                            <pre><code>UI:AddColorPicker({ 
    Name = "ESP Color", 
    Default = Color3.fromRGB(255, 0, 0),
    Transparency = 0.5,
    Callback = function(color, alpha) end 
})</code></pre>
                        </div>
                    </div>

                    <!-- Keybind -->
                    <div class="el-row">
                        <div class="el-info">
                            <h4>AddKeybind</h4>
                            <p>Привязка клавиши. Поддерживает Enum и ввод от пользователя.</p>
                        </div>
                        <div class="el-code">
                            <pre><code>UI:AddKeybind({ 
    Name = "Flight Key", 
    Default = Enum.KeyCode.F,
    Callback = function(key) end 
})</code></pre>
                        </div>
                    </div>

                    <!-- Button -->
                    <div class="el-row">
                        <div class="el-info">
                            <h4>AddButton</h4>
                            <p>Простое действие без сохранения состояния.</p>
                        </div>
                        <div class="el-code">
                            <pre><code>UI:AddButton({ 
    Name = "Reset All", 
    Callback = function() end 
})</code></pre>
                        </div>
                    </div>
                </div>

                <!-- SUB-MENUS EXPLAINED -->
                <div class="special-note">
                    <div class="note-title"><i data-lucide="layers"></i> Прокси-объекты и Nested Option</div>
                    <p>При создании элемента с параметром <code>Option = true</code>, вызов метода возвращает объект, содержащий свойство <code>.Option</code>. Это полнофункциональный контейнер <code>Elements</code>.</p>
                    <div class="code-window">
                        <pre><code>local master = UI:AddToggle({ Name = "Main Switch", Option = true })
-- Добавляем кнопку ВНУТРЬ тоггла (появится при клике на шестеренку)
master.Option:AddButton({ Name = "Internal Action", Callback = function() end })</code></pre>
                    </div>
                </div>
            </div>

            <!-- SYSTEM UTILS -->
            <div class="api-sub-section">
                <h3>Служебные функции и События</h3>
                
                <div class="method-box">
                    <div class="method-header">
                        <span class="method-name">Vantality.Bind</span>
                        <span class="method-params">(signal: RBXScriptSignal, callback: function)</span>
                    </div>
                    <div class="method-body">
                        <p><strong>Важно:</strong> Никогда не делайте <code>.Connect</code> напрямую к сигналам игры. Используйте <code>Vantality.Bind</code> — это гарантирует, что соединение будет разорвано автоматически, когда скрипт выгрузится.</p>
                        <div class="code-window">
                            <pre><code>Vantality.Bind(game:GetService("RunService").RenderStepped, function(dt)
    -- Ваш цикл тут
end)</code></pre>
                        </div>
                    </div>
                </div>

                <div class="method-box">
                    <div class="method-header">
                        <span class="method-name">Vantality.Notify</span>
                        <span class="method-params">(config: table)</span>
                    </div>
                    <div class="method-body">
                        <p>Вызов нативного уведомления. Список доступных иконок соответствует библиотеке <strong>Lucide</strong>.</p>
                        <div class="code-window">
                            <pre><code>Vantality.Notify({ 
    Title = "Success", 
    Content = "Settings Applied!", 
    Icon = "check-circle", 
    Duration = 5 
})</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CLEANUP -->
        <section id="cleanup" class="content-block">
            <div class="block-title">
                <i data-lucide="refresh-ccw"></i>
                <h2>Жизненный цикл и OnUnload</h2>
            </div>
            <p>Когда пользователь нажимает "Unload" или удаляет ваш скрипт из списка, Vantality вызывает глобальную функцию <code>OnUnload</code>, если она определена. Это ваш шанс вернуть игру в исходное состояние.</p>
            <div class="code-window ide">
                <div class="ide-header">cleanup_logic.lua</div>
                <pre><code>-- Сохраняем оригинальные параметры
local oldFog = game.Lighting.FogEnd

function OnUnload()
    -- Обязательно возвращаем всё как было!
    game.Lighting.FogEnd = oldFog
    print("Script Resources Cleared")
end</code></pre>
            </div>
        </section>

        <!-- FULL EXAMPLE -->
        <section id="full-example" class="content-block">
            <div class="block-title">
                <i data-lucide="file-check"></i>
                <h2>Итоговый пример (Complete Script)</h2>
            </div>
            <p class="section-desc">Демонстрация всех основных возможностей API в одном файле.</p>
            <div class="code-window ide large">
                <div class="ide-header">example_api.lua</div>
                <pre><code>local UI = Vantality.CreateSection("API Showcase")

-- VANTALITY LUAU API EXAMPLE
-- тут показаны все элементы и правильная логика работы.


-- 1. просто создаёшь секцию, дав ей название
local UI = Vantality.CreateSection("LUAU API  EXAMPLE")


-- 2. обычный тоггл.
UI:AddToggle({
    Name = "Simple Toggle",
    Default = false,
    Callback = function(state)
        print("Toggle state:", state)
    end
})

-- тоггл с доп.элементами внутри шестерёнки (Option). полезно, чтобы не засорять секцию.
local MasterSwitch = UI:AddToggle({
    Name = "Master Switch (+Settings)",
    Default = true,
    Option = true, -- включает доп. меню справа
    Risky = true,  -- красит текст в оранжевый (типа "особенная" или "опасная" функция, юзай как хочешь
    Callback = function(state)
        print("Master:", state)
    end
})

-- добавляем элементы во ВНУТРЬ Master Switch. (добавлять необязательно, но удобно при разработке)
local SubMenu = MasterSwitch.Option

-- обращаемся к .Option, который вернул прошлый метод. 
SubMenu:AddToggle({
    Name = "Nested Toggle",
    Default = false,
    Callback = function(v) print("Inside master:", v) end
})

SubMenu:AddSlider({
    Name = "Nested Slider",
    Range = {0, 100},
    Default = 50,
    Callback = function(v) print("Slider inside toggle:", v) end
})


-- 3. обычный интовый слайдер.
UI:AddSlider({
    Name = "Integer Slider",
    Range = {1, 100}, -- Мин, Макс
    Default = 50,
    Step = 1,         -- Шаг
    Type = "%",       -- Просто текст после цифры
    Callback = function(val)
        -- val приходит как целое число
    end
})

-- слайдер для float значений.
local PreciseSlider = UI:AddSlider({
    Name = "Precise Slider",
    Range = {0, 1},
    Default = 0.5,
    Precise = 2,   -- Сколько знаков после запятой (0.50)
    Option = true, -- У слайдеров тоже может быть подменю, если нужно
    Callback = function(val)
        print("Float val:", val)
    end
})

-- кнопка внутри настроек слайдера (почему бы и нет?)
PreciseSlider.Option:AddButton({
    Name = "Reset to 0.5",
    Callback = function()
        print("тут должна быть логика сброса") 
        -- P.S. сеттеры значений добавятся позже, пока просто коллбек
    end
})


-- 4. dropdowns (списки): одиночный выбор.
UI:AddDropdown({
    Name = "Weapon Selector",
    Values = {"AK-47", "M4A1", "AWP", "Deagle"},
    Default = "AK-47",
    Multi = false,
    Option = true, 
    Callback = function(val)
        print("Selected:", val) -- возвращает строку
    end
})

-- мульти-выбор (несколько параметров).
UI:AddDropdown({
    Name = "ESP Filters",
    Values = {"Players", "Items", "Vehicles"},
    Default = {["Players"] = true, ["Items"] = false}, -- Формат для мульти
    Multi = true,
    Callback = function(val)
        -- тут val — это таблица: {Players = true, Items = false ...}
        for name, enabled in pairs(val) do
            if enabled then print("Filter active:", name) end
        end
    end
})


-- 5. цвета и бинды: колорпикер. поддерживает прозрачность.
local ColorSettings = UI:AddColorPicker({
    Name = "Chams Color",
    Default = Color3.fromRGB(170, 0, 255),
    Transparency = 0.5, -- от 0 до 1
    Option = true,
    Callback = function(color, alpha)
        -- color: Color3, alpha: number
        print("Color updated:", color, "Alpha:", alpha)
    end
})

-- бинды клавиш.
UI:AddKeybind({
    Name = "Aimbot Key",
    Default = Enum.KeyCode.E, -- можно и строкой "E", но Enum надежнее
    Option = true, -- у бинда тоже есть меню (обычно туда ставят режим Hold/Toggle)
    Callback = function(key)
        print("New key bound:", key)
    end
})


-- 6. кнопки и уведомления
UI:AddButton({
    Name = "Send Notification",
    Callback = function()
        -- встроенная система уведов. иконки берутся из Lucide в библиотеке.
        Vantality.Notify({
            Title = "Success",
            Content = "Config saved to clipboard!",
            Icon = "save", 
            Duration = 3
        })
    end
})


-- 7. ЛОГИКА (ГЛАВНЫЙ ЦИКЛ)
---------------------------
-- ВАЖНО: никогда не используй game:GetService("RunService").RenderStepped:Connect(...) напрямую
-- если ты перезагрузишь скрипт, старый коннект останется висеть и будет дублироваться.
-- Vantality.Bind сам всё почистит при выгрузке.

local Counter = 0
Vantality.Bind(game:GetService("RunService").RenderStepped, function(dt)
    Counter = Counter + 1
    -- пример логики, которая выполняется каждый кадр
    if Counter % 600 == 0 then
        -- print("Script is alive. Frames:", Counter)
    end
end)


-- 8. ВЫГРУЗКА (CLEANUP)
------------------------
-- эта функция вызывается автоматически, когда ты нажимаешь "Unload Script" 
-- или удаляешь файл через меню.
-- обязательно сбрасывай тут все изменения в игре (FOV, визуалы и т.д.).

function OnUnload()
    print('>> Script unloaded via API.')
    print("UI removed automatically, connections cleared.")
    
    -- пример: вернули гравитацию как была
    -- workspace.Gravity = 196.2
end</code></pre>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2026 VANTALITY. Developed by <span class="pink">grab1s</span>.</p>
            <div class="footer-links">
                <span>UI Library: Fatality Engine Mod</span>
                <span>Luau API v1.7</span>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
